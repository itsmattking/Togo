#!/usr/bin/env ruby

require 'togo'
require 'togo/admin'

if ARGV.first == 'init'
  $:.push('.')
  puts "Creating togo-admin.ru...";
  FileUtils.cp(File.join($:.find{|p| p =~ /lib\/togo\/admin/},'togo-admin.ru.default'),'./togo-admin.ru')
  exit
end

Togo::Admin.configure({
  :environment => :development,
  :handler => Togo::Admin.handler,
  :reloader => Togo::TogoReloader,
  :standalone => true
})

begin
  load 'togo-admin.ru'
rescue LoadError
  puts "Missing config file: togo-admin.ru. Run 'togo-admin init' to generate the file."
end
